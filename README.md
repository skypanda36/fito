# fito
Суть проекта:
Организация системы автоматизированного управления и контроля состояния фитокартины на базе модуля esp8266 (esp8285) в исполнении esp-01 (конечный автомат).

Фитокартина представляет собой модуль исполненный из:
металлического профиля (алюминиевый швеллер),
листов пластика (органическое стекло, поликарбонат, полистирол, пвх),
силиконовые трубки,
пенопластовые заглушки,
баки с питательным рствором, 
фиттинги,
болты,
трос для крепления,
декоративная рама.

Водяной насос (-5В или ~220В), 
система искуственного освещения (~220В), 
датчик влажности синтетического субстрата (измеритель проводимости (0-5В) по сути два металлических проводника),
датчик уровная воды (0-5В),
преобразователь логических уровней 3.3В <-> 5В, 
релейные модули для коммутации освещения и насоса,
преобразователь напряжения (5В -> 3.3 В) для esp8266,
преобразователь напряжения (~220В -> -5В) для питания платы управления, преобразователя логических уровней, релейных модулей и питания насоса (-5В),
лампа с патроном или светильник (~220В)
провод питания (220В),
вилка питания.

Основные задачи:
1. Создание уюта и атмосферы сада в условиях офиса/кавартиры.
2. Максимизация временных промежутков между добавлениями питательного раствора в модуль.
3. Минимизация шумов изаваемых насосом.
4. Организация интуитивно понятной системы регулировок и установок системы посредством Wi-fi соединения и мобильного приложения.
  
  4.1. Модуль поключается к беспроводной сети офиса/квартиры и синхронизирует время из глобальной сети.
  
  4.2. Модуль поключается к беспроводной сети офиса/квартиры и синхронизирует установки с мобильным приложением.
  
    4.2.1. Время включения освещения досветки (лампа ~220В). (Дефолтное значение 7 утра).
  
    4.2.2. Время отключения освещения досветки (лампа ~220В). (Дефолтное значение 10 вечера).
  
    4.2.3. Время влючения системы полива (насос -5В или ~220В) (Дефолтное значение 7 утра). Иммется ввиду, что до этого времени полив осуществляться не будет (подсыхание корней, корни дышат воздухом, насос ночью не гудит).
 
    4.2.4. Время отключения системы полива (насос -5В или ~220В) (Дефолтное значение 10 Вечера). Иммется ввиду, что после этого времени полив осуществляться не будет (подсыхание корней, корни дышат воздухом, насос ночью не гудит).
 
    4.2.5. Время длительности полива. Разные по геометрическим размерам модули требуют разного времени полива (30с - 5мин, примерно).
 
    4.2.6. Частота повторения циклов полива (1час - 3 часа, примерно), так как модули могут быть вообще без субстрата - их надо поливать чаще, с синтетическим субстратом - реже).
  
    4.2.7. Включение/выключение сигнализации о низком уровне питательного раствора (на основе датчика уровня, необходимо учесть, что во время полива уровень жидкости может падать до нуля, но потом уровень жидкости частично возвращается обратно, таким образом замер уровня жидкости необходимо производить непосредственно до полива.
  
    4.2.8. Определения вида сигнализации о низком уровне (мигание лампы освещения досветки или другой подстветки, к примеру за декоративной рамкой светодиодная лента (отдельный релейный модуль, отдельная ножка МК), периодичность включения сигнализации, частота мигания лампы.
  
    4.2.9. Включение/выключение сигнализации о необходисмости сервисного обслуживания. Такая необходимость возникает в случаях:
        
        4.2.9.1. Выход из строя водяного насоса (субстрат не увлажняется, риск гибели растений).
        
        4.2.9.2. Засорение силиконовых трубок (субстрат частично увлажняется, риск гибели растерий).
        
        4.2.9.3. Перегорание лампы освещения досветки (растения не получают достаточного количества светового излучения), аппаратный контроль требует отдельной ножки МК и монтажа фотодиода/фоторезистора), опциональный момент, такой контроль может производиться визуально.
        
    4.2.10. Определения вида сигнализации о низком уровне (мигание лампы освещения досветки или другой подстветки, к примеру за декоративной рамкой светодиодная лента (отдельный релейный модуль, отдельная ножка МК), периодичность включения сигнализации, частота мигания лампы.
    
    
5. Организация беспроводного обновления ПО при помощи системы OTA.
6. Организация ручного управленя при помощи мобильного приложения (необходимо для первого запуска системы, тестирования).
7. Организация системы уведомлений на мабильное устройство.
8. Организация системы логгирования и отправка логов состояния и ошибок на электронную почту сервисной службы.


Что реализовано:
1. Запрос времени раз в 10 секунд с NTP сервера time.nist.gov
2. Время полива регулируется в ручную из программы. 10 - 20 минут каждого часа во время работы системы досветки.
3. Время работы системы досветки регулируется вручную из программы с 7 до 20 часов
4. Налажено "общение" системы с сервером blynk, но при попытке управления с мобильного устройства - таращит не слабо, из-за перехвата управления примитивной программой.
5. Система OTA сработала один раз, но при подключении системы blynk работать перестала.
6. Собран корпус, осуществлен монтаж ванн для размещения растений, смонтирован крепеж на стену, ведутся работы по минимизации размеров электронного блока.

При прекращении использования ножек rx и tx появятся дополнительные пины МК, которые можно использовать.










